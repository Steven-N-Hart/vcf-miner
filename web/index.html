<!doctype html>
<html lang="us">
<head>
	<meta charset="utf-8">
	<title>Mongo View</title>

    <link rel="shortcut icon" type="image/ico" href="http://www.datatables.net/favicon.ico">
    <link rel="stylesheet" type="text/css" href="bootstrap-2.3.2/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="DataTables-1.9.4/media/css/DT_bootstrap.css">
    <link rel="stylesheet" href="chosen-0.10.0/chosen.css">
    <link rel="stylesheet" type="text/css" href="bootstrap-modal-2.1/css/bootstrap-modal.css">
    <link rel="stylesheet" type="text/css" href="Acquisio-bootstrap-dropdown-checkbox-5f2ad8d/css/bootstrap-dropdown-checkbox.css">

    <!-- workaround for navbar overlapping site by 40 pixels -->
    <style>
        body { padding-top: 40px; }

        body .wide-modal {
            /* new custom width */
            width: 1024px;
            /* must be half of the width, minus scrollbar on the left (30px) */
            margin-left: -512px;
        }

        body .modal-256wide {
            /* new custom width */
            width: 256px;
            /* must be half of the width, minus scrollbar on the left (30px) */
            margin-left: -128px;
        }

        body .modal-350wide {
            /* new custom width */
            width: 350px;
            /* must be half of the width, minus scrollbar on the left (30px) */
            margin-left: -175px;
        }

        body .modal-800wide {
            /* new custom width */
            width: 800px;
            /* must be half of the width, minus scrollbar on the left (30px) */
            margin-left: -400px;
        }

        body .modal-600wide {
            /* new custom width */
            width: 600px;
            /* must be half of the width, minus scrollbar on the left (30px) */
            margin-left: -300px;
        }
    </style>

    <script src="jquery-1.10.1/jquery-1.10.1.js"></script>
    <script src="jquery.livequery-1.3.4/jquery.livequery.min.js"></script>
    <script src="bootstrap-2.3.2/js/bootstrap.js"></script>
    <script src="DataTables-1.9.4/media/js/jquery.dataTables.js"></script>
    <script src="DataTables-1.9.4/media/js/DT_bootstrap.js"></script>
    <script src="underscore-1.4.4/underscore.js"></script>
    <script src="backbone-1.0.0/backbone.js"></script>
    <script src="backbone.localStorage-1.1.5/backbone.localStorage-min.js"></script>
    <script src="bootstrap-modal-2.1/js/bootstrap-modalmanager.js"></script>
    <script src="bootstrap-modal-2.1/js/bootstrap-modal.js"></script>
    <!--<script type="text/javascript" src="Acquisio-bootstrap-dropdown-checkbox-5f2ad8d/js/bootstrap-dropdown-checkbox.js"></script>-->


    <script src="js/mongo_util.js" type="text/javascript"></script>
    <script src="js/mongo_view.js" type="text/javascript"></script>
    <script src="js/customized-bootstrap-dropdown-checkbox.js" type="text/javascript"></script>


    <!-- underscorejs templates -->
    <script id="searched-filter-template" type="text/template">
        <span class="label"><td><%=name%></td></span>
        <span class="label"><td><%=displayOperator%></td></span>
        <span id="<%=id%>_display_value_label" class="label"><td><%=displayValue%></td></span>
        <td><span class="badge badge-info" id="<%=id%>_num_matches_label"><%=numMatches%></span></td>
        <td><button id="<%=id%>_remove_button" title="Remove filter from your search" type="button" class="btn" onclick="removeFilter('<%=id%>')">x</button></td>
    </script>
    <script id="info-message-template" type="text/template">
        <div class="alert alert-info">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <%=message%>
        </div>
    </script>
    <script id="warning-message-template" type="text/template">
        <div class="alert alert-block">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4>Warning!</h4>
            <%=message%>
        </div>
    </script>
    <script id="warning-popover-template" type="text/template">
        <div class="alert alert-block">
            <h4>Warning!</h4>
            <%=message%>
        </div>
    </script>
    <script id="error-message-template" type="text/template">
        <div class="alert alert-error">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <h4>Error</h4>
            <%=message%>
        </div>
    </script>
</head>
<body>

<!-- Modal -->
<div id="select_vcf_modal" class="modal modal-256wide hide fade" tabindex="-1" role="dialog" aria-labelledby="select_vcf_label" aria-hidden="true">
    <div class="modal-header">
        <h3 id="select_vcf_label">Select a VCF File</h3>
    </div>
    <div class="modal-body">
        <select id="vcf_list"></select>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true" id="select_vcf_close" onclick="setWorkspace()">Select</button>
    </div>
</div>

<!-- Modal -->
<div id="add_filter_modal" class="modal modal-800wide hide fade" tabindex="-1" role="dialog" aria-labelledby="add_filter_label" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="add_filter_label">Add Filter</h3>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <div class="row-fluid"> <!-- tabs -->
                <div class="span12">
                    <ul class="nav nav-tabs" id="add_filter_tabs">
                        <li class="active"><a href="#tab_content_sample">Sample</a></li>
                        <li><a href="#tab_content_gene">Gene</a></li>
                        <li><a href="#tab_content_group">Group</a></li>
                        <li><a href="#tab_content_info">Info</a></li>
                    </ul>
                </div>
            </div>
            <div class="row-fluid"> <!-- tab content pane -->
                <div class="span12">
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_content_sample"> <!-- SAMPLE tab -->
                            <div class="container-fluid" id="pallet_view">
                                <div class="row-fluid"> <!-- header row -->
                                    <div class="span5"><h4>Filter</h4></div>
                                    <div class="span1"></div>
                                    <div class="span6"><h4>Value</h4></div>
                                </div>
                                <div class="row-fluid"> <!-- divider -->
                                    <div class="span12"><hr></div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span5">
                                        <select class="span12" id="sample_field_list">
                                            <!-- Dynamically added by javascript -->
                                        </select>
                                    </div>
                                    <div class="span1">
                                        <select class="span12" id="sample_operator_list">
                                            <!-- always going to be equals -->
                                            <option value='eq'>=</option>
                                        </select>
                                    </div>
                                    <div class="span6" id="sample_value_div">
                                        <!-- Dynamically added by javascript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_content_gene"> <!-- GENE tab -->
                            <div class="container-fluid">
                                <div class="row-fluid"> <!-- header row -->
                                    <div class="span2"><h4>Filter</h4></div>
                                    <div class="span1"></div>
                                    <div class="span9"><h4>Value</h4></div>
                                </div>
                                <div class="row-fluid"> <!-- divider -->
                                    <div class="span12"><hr></div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span2">Gene</div>
                                    <div class="span1">=</div>
                                    <div class="span9">
                                        <div class="row-fluid">
                                            <div class="span12">
                                                <input id="gene_typeahead" type="text" data-provide="typeahead" autocomplete="off" placeholder="<Enter Gene Name>">
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="span12">
                                                <select id="gene_list" size="10" multiple="multiple"></select>
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="span12">
                                                <button id="reset_gene_list" title="Remove all rows">Reset</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_content_group"> <!-- GROUP tab -->
                            <div class="container-fluid">
                                <div class="row-fluid"> <!-- header row -->
                                    <div class="span2"><h4>Filter</h4></div>
                                    <div class="span1"></div>
                                    <div class="span9"><h4>Value</h4></div>
                                </div>
                                <div class="row-fluid"> <!-- divider -->
                                    <div class="span12"><hr></div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span2">Group</div>
                                    <div class="span1">=</div>
                                    <div class="span9">
                                        <div class="input-append">
                                            <select id="group_list" class="input-large"></select>
                                            <button id="new_group_button" title="Create a new group" type="button" class="btn"><i class="icon-plus"></i></button>
                                            <button id="remove_group_button" title="Remove group" type="button" class="btn"><i class="icon-minus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_content_info"> <!-- info tab -->
                            <div class="container-fluid" id="info_filter_table">
                                <div class="row-fluid"> <!-- header row -->
                                    <div class="span5"><h4>Filter</h4></div>
                                    <div class="span1"></div>
                                    <div class="span6"><h4>Value</h4></div>
                                </div>
                                <div class="row-fluid"> <!-- divider -->
                                    <div class="span12"><hr></div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span5">
                                        <select class="span12" id="info_field_list">
                                            <!-- Dynamically added by javascript -->
                                        </select>
                                    </div>
                                    <div class="span1">
                                        <select class="span12" id="info_operator_list">
                                            <!-- Dynamically added by javascript -->
                                        </select>
                                    </div>
                                    <div class="span6" id="info_value_div">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true" onclick="addFilter()">Add</button>
        <button class="btn" data-dismiss="modal" aria-hidden="true" id="add_filter_close">Cancel</button>
    </div>
</div>

<!-- Modal -->
<div id="create_group_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="select_vcf_label" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>Create Group</h3>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span3">Group Name:</div>
                <div class="span9"><input id="group_name_field" type="text"></div>
            </div>
            <div class="row-fluid"> <!-- divider -->
                <div class="span12"><hr></div>
            </div>
            <div class="row-fluid">
                <div class="span5"> <!-- available samples column -->
                    <div class="row-fluid">
                        <div class="span12">
                            Available Samples
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <select id="available_samples_list" size="15" multiple="multiple" class="span12"></select>
                        </div>
                    </div>
                </div>
                <div class="span2"> <!-- button column -->
                    <div class="container-fluid">
                        <div class="row-fluid">
                            <div class="span12"></div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12"></div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12"></div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12"></div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <button class="btn" id="add_sample_to_group_button"><i class="icon-chevron-right"></i></button>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12"></div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <button class="btn" id="remove_sample_from_group_button"><i class="icon-chevron-left"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="span5"> <!-- group samples column -->
                    <div class="row-fluid">
                        <div class="span12">
                            Group Samples
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <select id="group_samples_list" size="15" multiple="multiple" class="span12"></select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true" id="new_group_apply">Create</button>
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    </div>
</div>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="#">Mongo View</a>
            <img src="img/bull-graphic.png" width="60" height="50">
            <ul class="nav pull-right">
                <li id="vcf_file" class="navbar-text">VCF File:</li>
            </ul>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12" id="message_area">
            <!-- populated by underscorejs template as needed -->
        </div>
    </div>
    <div class="row-fluid">
        <div class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                    <div class="nav-header"><h4>You Searched For</h4></div>
                    <div id="searched_view">
                        <table class="table" id="searched_table">
                            <tr>
                                <th colspan="3">Filter</th>
                                <th>Variants</th>
                                <th></th>
                            </tr>
                            <tr id="add_filter_row">
                                <span class="label"><td colspan="3"><button title="Add filter to your search" class="btn btn-primary btn-block" onclick="showAddNewFilter()">Add Filter</button></td></span>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                </ul>
            </div><!--/.well -->
        </div><!--/span-->
        <div class="span9">
            <div class="hero-unit">
                <div class="row-fluid">
                    <div class="span6"></div>
                    <div class="span6">
                        <div class="pull-right">
                            <div id="buttonPlaceholder">
                                <!-- Button to trigger modal -->
                                <a href="#myModal" role="button" class="btn" data-toggle="modal">Columns</a>

                                <!-- Modal -->
                                <div id="myModal" class="modal hide fade wide-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                        <h3 id="myModalLabel">Customize Columns</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="pre-scrollable">
                                            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="config_columns_table"></table>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn" data-dismiss="modal" aria-hidden="true" id="column_dialog_close">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="variant_table"></table>
                    </div>
                </div>
            </div>
        </div><!--/span-->
    </div><!--/row-->
    <hr>
</div>
</body>
</html>
