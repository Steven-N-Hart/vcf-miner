<!doctype html>
<html lang="us">
<head>
	<meta charset="utf-8">
	<title>Mongo View</title>

    <link rel="shortcut icon" type="image/ico" href="http://www.datatables.net/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="bootstrap-2.3.2/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="DataTables-1.9.4/media/css/DT_bootstrap.css">
    <link rel="stylesheet" href="chosen-0.10.0/chosen.css" />

    <!-- workaround for navbar overlapping site by 40 pixels -->
    <style>
        body { padding-top: 40px; }

        body .wide-modal {
            /* new custom width */
            width: 1024px;
            /* must be half of the width, minus scrollbar on the left (30px) */
            margin-left: -512px;
        }
    </style>

    <script src="jquery-1.10.1/jquery-1.10.1.js"></script>
    <script src="jquery.livequery-1.3.4/jquery.livequery.min.js"></script>
    <script src="bootstrap-2.3.2/js/bootstrap.js"></script>
    <script src="DataTables-1.9.4/media/js/jquery.dataTables.js"></script>
    <script src="DataTables-1.9.4/media/js/DT_bootstrap.js"></script>
    <script src="underscore-1.4.4/underscore.js"></script>
    <script src="backbone-1.0.0/backbone.js"></script>
    <script src="backbone.localStorage-1.1.5/backbone.localStorage-min.js"></script>

    <script src="js/mongo_view.js" type="text/javascript"></script>

    <!-- underscorejs templates -->
    <script id="searched-filter-template" type="text/template">
        <span class="label"><td><%=name%></td></span>
        <span class="label"><td><%=operator%></td></span>
        <span id="<%=id%>_display_value_label" class="label"><td><%=displayValue%></td></span>
        <td><span class="badge badge-info"><%=numMatches%></span></td>
        <td><button id="<%=id%>_remove_button" title="Remove filter from your search" type="button" class="btn" onclick="uncheckFilter('<%=id%>')">x</button></td>
    </script>
    <script id="pallet-filter-template" type="text/template">
        <td><label for="<%=id%>_add_button" class="checkbox"><input id="<%=id%>_add_button" type="checkbox"/><%=name%></label></td>
        <td><input id="<%=id%>_value_field" class="input-mini" type="text" value="<%=value%>"></td>
    </script>
    <script id="info-message-template" type="text/template">
        <div class="alert alert-info">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <%=message%>
        </div>
    </script>
    <script id="warning-message-template" type="text/template">
        <div class="alert alert-block">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4>Warning!</h4>
            <%=message%>
        </div>
    </script>
    <script id="error-message-template" type="text/template">
        <div class="alert alert-error">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <h4>Error</h4>
            <%=message%>
        </div>
    </script>
</head>
<body>

<!-- Modal -->
<div id="select_vcf_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="select_vcf_label" aria-hidden="true">
    <div class="modal-header">
        <h3 id="select_vcf_label">Select a VCF File</h3>
    </div>
    <div class="modal-body">
        <select id="vcf_list"></select>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true" id="select_vcf_close" onclick="setWorkspace()">Select</button>
    </div>
</div>

<!-- Modal -->
<div id="add_filter_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="add_filter_label" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="add_filter_label">Add Filter</h3>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <div class="row-fluid"> <!-- tabs -->
                <div class="span12">
                    <ul class="nav nav-tabs" id="add_filter_tabs">
                        <li class="active"><a href="#tab_content_sample">Sample</a></li>
                        <li><a href="#tab_content_gene">Gene</a></li>
                        <li><a href="#tab_content_group">Group</a></li>
                        <li><a href="#tab_content_info">Info</a></li>
                    </ul>
                </div>
            </div>
            <div class="row-fluid"> <!-- tab content pane -->
                <div class="span12">
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_content_sample">
                            <table id="sample_filter_table"></table>
                        </div>
                        <div class="tab-pane" id="tab_content_gene">
                            <div class="container-fluid">
                                <div class="row-fluid">
                                    <div class="span1">
                                        <input id="genes_add_button" type="checkbox"/>
                                    </div>
                                    <div class="span11">
                                        <input id="gene_typeahead" type="text" data-provide="typeahead" autocomplete="off" placeholder="<Enter Gene Name>">
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span11">
                                        <select id="gene_list" size="10" multiple="multiple"></select>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span11">
                                        <button id="reset_gene_list" title="Remove all rows">Reset</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_content_group">
                            <div class="row-fluid">
                                <div class="span5"> <!-- column that holds group -->
                                    <div class="row-fluid">
                                        <div class="span2">
                                            <input id="group_add_button" type="checkbox" class="span2"/>
                                        </div>
                                        <div class="span10">
                                            <select id="group_list" size="10" class="span12"></select>
                                        </div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span2"></div>
                                        <div class="span10">
                                            <button id="new_group_button" title="Create a new group">New</button>
                                            <button id="remove_group_botton" title="Remove selected group">Remove</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="span7"> <!-- column that holds group details -->
                                    <div class="row-fluid">
                                        <div class="span4">
                                            Name
                                        </div>
                                        <div class="span8">
                                            <input id="group_name_field" type="text" class="span12"/>
                                        </div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">
                                            Description
                                        </div>
                                        <div class="span8">
                                            <textarea id="group_desc_field" rows="3" class="span12"></textarea>
                                        </div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">
                                            Samples
                                        </div>
                                        <div class="span8">
                                            <select id="group_sample_list" size="5" class="span12"></select>
                                        </div>
                                    </div>
                                    <div class="row-fluid">
                                        <div class="span4">
                                        </div>
                                        <div class="span8">
                                            <button id="edit_group_samples_button" title="Edit samples in group">Edit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_content_info">
                            <table id="info_filter_table"></table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true" id="add_filter_close">Close</button>
    </div>
</div>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="#">Mongo View</a>
            <img src="img/bull-graphic.png" width="60" height="50">
            <ul class="nav pull-right">
                <li id="vcf_file" class="navbar-text">VCF File:</li>
            </ul>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12" id="message_area">
            <!-- populated by underscorejs template as needed -->
        </div>
    </div>
    <div class="row-fluid">
        <div class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                    <div class="nav-header"><h4>You Searched For</h4></div>
                    <div id="searched_view">
                        <table class="table" id="searched_table">
                            <tr>
                                <th colspan="3">Filter</th>
                                <th>Variants</th>
                                <th></th>
                            </tr>
                            <tr id="add_filter_row">
                                <span class="label"><td colspan="3"><button title="Add filter to your search" class="btn btn-block" onclick="addNewFilter()">Add Filter</button></td></span>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                </ul>
            </div><!--/.well -->
        </div><!--/span-->
        <div class="span9">
            <div class="hero-unit">
                <div class="row-fluid">
                    <div class="span6"></div>
                    <div class="span6">
                        <div class="pull-right">
                            <div id="buttonPlaceholder">
                                <!-- Button to trigger modal -->
                                <a href="#myModal" role="button" class="btn" data-toggle="modal">Columns</a>

                                <!-- Modal -->
                                <div id="myModal" class="modal hide fade wide-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                        <h3 id="myModalLabel">Customize Columns</h3>
                                    </div>
                                    <div class="modal-body">
                                        <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="config_columns_table"></table>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn" data-dismiss="modal" aria-hidden="true" id="column_dialog_close">Close</button>
                                    </div>
                                </div>                            </div>
                        </div>
                    </div>
                </div>
                <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="variant_table"></table>
            </div>
        </div><!--/span-->
    </div><!--/row-->
    <hr>
</div>
</body>
</html>
